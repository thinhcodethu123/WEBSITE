
// validation form register and register user local storage
const inputUsernameRegister = document.querySelector(".input-signup-username");
const inputEmailRegister = document.querySelector(".input-signup-email");
const inputPasswordRegister = document.querySelector(".input-signup-password");
const btnRegister = document.querySelector(".signup__signInButton");

const sign_up_btn = document.querySelector("#sign-up-btn");
const container = document.querySelector(".container");

// validation form register and register user local storage


btnRegister.addEventListener("click", (e) => {
  e.preventDefault();
  if (
    inputUsernameRegister.value === "" ||
    inputEmailRegister.value === "" ||
    inputPasswordRegister.value === "" 
  ) {
    alert("vui lòng không để trống");
  } else {
    // array user
    const user = {
      username: inputUsernameRegister.value,
      email: inputEmailRegister.value,
      password: inputPasswordRegister.value,
    };
    let json = JSON.stringify(user);
    localStorage.setItem(inputUsernameRegister.value, json);
    alert("Đăng Ký Thành Công")
    sign_up_btn.addEventListener("click", () => {
      container.classList.add("sign-up-mode");
    });
  }
});


        // declare array globally
        let listStudent = []

        function validateInput(){
            let formElement = document.querySelector(".form")
            let inputElement = formElement.querySelectorAll(".form-input")
            for (let i = 0; i < inputElement.length; i++) {
                if (inputElement[i].value === "") {
                    inputElement[i].parentElement.querySelector(".error-message").innerText = `Please enter your ${inputElement[i].id}`
                } else {
                    inputElement[i].parentElement.querySelector(".error-message").innerText = ""
                }
            }
        }
        
        
        function addNew(){
            validateInput()
            let formElement = document.querySelector(".form")
            let errorElement = formElement.querySelectorAll(".error-message")
            let arrErrorElement = []
            for (let i = 0; i < errorElement.length; i++) {
                arrErrorElement.push(errorElement[i].innerText)
            }
            let checkErrorElement = arrErrorElement.every(value => value === "")
            if (checkErrorElement){
                let name = document.getElementById("name").value
                let email = document.getElementById("email").value
                let password = document.getElementById("password").value
                let listStudent = localStorage.getItem("list-student") ? JSON.parse(localStorage.getItem("list-student")) : []
                // retrieve existing data
                let data = JSON.parse(localStorage.getItem("list-student"))
                if (data) {
                  listStudent = data
                }
                // add new entry
                listStudent.push({
                    name: name,
                    email: email,
                    password: password
                })
                localStorage.setItem("list-student", JSON.stringify(listStudent))
                returnStudent()
            }
        }




        function renderStudent() {
            let listStudent = localStorage.getItem("list-student") ? JSON.parse(localStorage.getItem("list-student")) : []
            let student = `
<div class="user-form">
  <div class="table">
    <div class="cell header"><h3>ID </h3></div>
    <div class="cell header"><h3>Name <i class="fa-solid fa-user"></i></h3></div>
    <div class="cell header"><h3>Email <i class="fa-solid fa-envelope"></i></h3></div>
    <div class="cell header"><h3>Password <i class="fa-solid fa-lock"></i></h3></div>
  </div>
</div>`

            listStudent.map((value, index)=>{
                student += ` 
                
<div class="user-form">
    <div class="table">

        <div class="cell">
          <h1>${index + 1}</h1>
        </div>

        <div class="cell" id="name">
          <h3>${value.name}</h3>
        </div>

        <div class="cell">
            <h3> ${value.email} </h3>
        </div>

        <div class="cell" id="password">
            <h3>${value.password}</h3>
        </div>

    </div>
</div>
                
                `
            })
            document.getElementById("tableContent").innerHTML = student
        } 

